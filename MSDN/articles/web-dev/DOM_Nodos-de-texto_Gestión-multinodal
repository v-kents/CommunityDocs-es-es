#Explorando el DOM: Nodos de texto. Gestión multinodal 

©Jaime Peña Tresancos, 2015 

[Twitter: @jpt219] (https://twitter.com/jpt219) 

[LinkedIn] (https://es.linkedin.com/pub/jaime-peña-tresancos/28/677/696)  



En este trabajo hablaremos de ciertas labores de tratamiento de contenidos de los nodos de texto, en su vertiente de gestión de nodos hermanos o multinodos en general. 

Todo ello será abordado con ejemplos ilustrativos para cada caso; en concreto: 

* Conocimiento del número de nodos hijos de uno dado. 

* Propiedades básicas para la obtención de los contenidos de los nodos hijos de uno aludido. 

* Cómo recorrer todo el árbol de nodos hijos de uno dado –nodos hermanos-. 

* Obtención del contenido textual, formateado o no, de los nodos hijos de un nodo dado. 

* Obtención del contenido HTML de los nodos hijos, incluyendo o excluyendo las etiquetas del nodo padre aludido. 

En un anterior artículo, cuya referencia se cita seguidamente, habíamos tratado los aspectos más fundamentales de los nodos de texto; sugerimos se dé un repaso a su contenido antes de abordar el presente: 

[Explorando el DOM: Nodos de texto. Creación, propiedades y métodos] (https://msdn.microsoft.com/es-es/library/mt143193.aspx)

###Referencias del DOM 

Las bases de referencia vienen dadas por el denominado DOM *Document Object Model*. Inicialmente el DOM ha sido definido como una API *Application Programming Interface* para la gestión de documentos XML en general *eXtensible Markup Language, lenguaje de marcas extensible* y posteriormente implementada para documentos HTML en particular. 

Para una descripción introductoria del DOM puede acudir a: http://es.wikipedia.org/wiki/Document_Object_Model 

La documentación oficial y más recomendable sobre el DOM se encuentra en el foro del W3C –World Wide Web Consortium- en diversos niveles de conformidad, por ejemplo: 

http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html 

http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html 

###Gestión de nodos hermanos –sibling text nodes- 

Cuando nos encontremos con un nodo dado con diferentes nodos hijos, estos tendrán entre sí la relación de nodos hermanos. 

Para tratar con ellos y extraer sus contenidos emplearemos, en los ejemplos, las siguientes propiedades: 

Propiedad | Descripción 
--------- | -----------
*firstChild* | Primer nodo hijo, del nodo de texto aludido (sobre el que se aplica)
*lastChild* | Último nodo hijo, del nodo de texto aludido 
*nextSibling* | Siguiente nodo hermano, del nodo de texto aludido 
*previousSibling* | Previo nodo hermano, del nodo de texto aludido 
*childNodes* | Colección de nodos hijos, del nodo de texto aludido 

En nuestros Listado 1 y Listado 2 y posteriormente en el Listado 3, extraeremos los contenidos de los nodos constituyentes del elemento <div> que hay en el cuerpo del documento. En los dos primeros casos, con aproximaciones diferentes –aunque similares- llegamos a obtener los tres nodos hijos. 

En el tercer caso, extraeremos el contenido exclusivamente textual del segundo nodo, esto será extraer el nodo hijo del segundo nodo hijo del elemento < div >.

Obsérvese la diferencia en las imágenes adjuntas. 

En lo esencial los respectivos listados contienen los siguientes códigos, con sus particularidades, fácilmente elucidables: 

* Un botón de comando que al ser pulsado llamara a la función *hermanos()*. 

* En dicha función se recoge el contenido de la propiedad *childNodes* perteneciente al elemento <div> *único elemento* <div> que hay en el cuerpo del documento y recabamos su longitud de nodos hijos cantidad de ellos, para más detalles véase el apartado que sigue y, según los casos se utilizarán las propiedades mostradas en la tabla anterior y/o sus combinaciones para ir recuperando los diferentes nodos hermanos los hijos del nodo padre original. 

* Se expone el resultado en la consola de textos, *mediante console.log()*. 

* Obsérvese en las figuras que siguen el resultado en cada caso. (La figura de los Listado 1 y Listado 2 es la misma) 

**NOTA**: Recuérdese que para acceder a la consola de textos de Internet Explorer hemos de pulsar la tecla F12 y posteriormente hacer clic sobre la pestaña Consola.

**Listado 1**: Obtención de los contenidos de nodos hermanos versión 1. 

````
<!doctype html> 

<html> 

<head lang="es-es"> 

    <meta charset="utf-8" /> 

    <title>Text Node - siblings</title> 

    <script> 

        function hermanos() { 

            var elementoDiv = document.querySelector('div'); 

            console.log(elementoDiv.childNodes.length);      // número de hijos (3) 

            console.log(elementoDiv.firstChild.data);        // primer hijo 

            console.log(elementoDiv.firstChild.nextSibling); // segundo hijo; el elemento <i> 

            console.log(elementoDiv.lastChild.data);         // último hijo 

        } 

    </script> 

</head> 

<body> 

    <div>Hola, <i>amigo y compañero</i> de fatigas</div> 

    <hr /> 

    <input type="button" value="siblings" onclick="hermanos()" /> 

</body> 

</html> 
````
**Listado 2**: Obtención de los contenidos de nodos hermanos versión 2. 

````
<!doctype html> 

<html> 

<head lang="es-es"> 

    <meta charset="utf-8" /> 

    <title>Text Node - siblings</title> 

    <script> 

        function hermanos() { 

            var elementoDiv = document.querySelector('div'); 

            console.log(elementoDiv.childNodes.length);      // número de hijos (3) 

            console.log(elementoDiv.firstChild.data);        // primer hijo 

            console.log(elementoDiv.firstChild.nextSibling); // segundo hijo; el elemento <i> 

            console.log(elementoDiv.firstChild.nextSibling.nextSibling.data); // tercer hijo 

        } 

    </script> 

</head> 

<body> 

    <div>Hola, <i>amigo y compañero</i> de fatigas</div> 

    <hr /> 

    <input type="button" value="siblings" onclick="hermanos()" /> 

</body> 

</html> 
````

![img1] (https://github.com/andygonusa/mystuff/blob/master/jp1.png)
